<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>接收消息</title>
    <style>
        p {
            padding: 0;
            margin: 0;
            margin-top: 8px;
        }
    </style>
</head>
<body>
<div id="message">
    Hello World!
</div>
<!-- <div class="form" style="position: fixed;bottom: 5px;right: 0;">
    <input type="text" name="input">
    <input type="button" name="button" value="send">
</div>
 -->
<script>
   // 创建一个随机颜色 
  var randomCloor = function () {
    var randomNum = function () {
      return Math.floor(Math.random() * 255);
    }
    return `rgb(${ randomNum() },${ randomNum() },${ randomNum() })`
  }


  window.onload = function () {
    var messageEle = document.getElementById('message');
     // 注册postmessage事件
    window.addEventListener('message', function (e) {
      // 判断 发送放的主机地址是否 期望的地址
      if (!/eastday\.com|lieqinews\.com|xxxxxxxxxx\.com|github\.com|tesla3699\.com/.test(e.origin)) {
        return;
      }
      // 打印 接受到的消息
      messageEle.innerHTML += `<br><span style="background: #eee;">从<span style="color:lightseagreen">${ e.origin }</span>收到消息：</span><p style="color:${ randomCloor() }">${ e.data } <small style="float: right;font-size: 12px;transform: scale(0.7)">${ new Date().toLocaleString() }</small></p>`;
    });
  }
</script>

</body>
</html>